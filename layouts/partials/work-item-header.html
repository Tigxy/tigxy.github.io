<div class="work-item-header">
    <a href="{{ .Params.company_url }}" target="_blank">
    {{ with .Params.logo }}
    <div class="logo-wrapper">
        <img src="{{ . | relURL }}" alt="Logo for {{ $.Params.company }}">
    </div>
    {{ end }}
    </a>
    <div class="job-meta">
    <h2 class="title">{{ .Params.title }}</h2>
    <h3 class="company">{{ .Params.company }}</h3>
    <!-- {{ $t := .Params.start }} -->
    
    <p class="date">
        {{ $start := time .Params.start }}
        {{ $end := time .Params.end }}
        {{ if not $end }}
        {{ $end := time.Now }}
        {{ end }}

        {{ $startYear := float ($start.Format "2006") }}
        {{ $startMonth := float ($start.Format "01")}}
        {{ $endYear := float ($end.Format "2006") }}
        {{ $endMonth := float ($end.Format "01") }}
        
        {{ $totalMonths := sub (add (mul $endYear 12) $endMonth) (add (mul $startYear 12) $startMonth) }}
        {{ $totalMonths := int ( add $totalMonths 1) }}                
        {{ $years := div $totalMonths 12 }}
        {{ $months := mod $totalMonths 12 }}
        
        <!-- {{ if gt $years 0 }}
        {{ $years }} year{{ if ne $years 1 }}s{{ end }}
        {{ end }}
        {{ if and (gt $years 0) (gt $months 0) }}, {{ end }}
        {{ if gt $months 0 }}
        {{ $months }} month{{ if ne $months 1 }}s{{ end }}
        {{ end }} -->

        <!-- see https://gohugo.io/functions/time/format/ -->
        {{ time.Format "January 2006" $start }} - 
        {{ if .Params.end }}
        {{ time.Format "January 2006" $end }}
        {{ else }}
        Present
        {{ end }}

        {{ $durationStr := "" }}                
        <!-- show year if greater zero -->
        {{ if gt $years 0 }}
        {{ $durationStr = print $durationStr $years " year" }}
        <!-- plural version -->
        {{ if ne $years 1 }}
            {{ $durationStr = print $durationStr "s" }}
        {{ end }}
        {{ end }}
        
        <!-- comma ',' between year and month -->
        {{ if and (gt $years 0) (gt $months 0)  }}
        {{ $durationStr = print $durationStr ", " }}
        {{ end }}

        <!-- show month if greater zero -->
        {{ if gt $months 0 }}
        {{ $durationStr = print $durationStr $months " month" }}
        <!-- plural version -->
        {{ if ne $months 1 }}
            {{ $durationStr = print $durationStr "s" }}
        {{ end }}
        {{ end }}

        <!-- wrap in brackets -->
        {{ $durationStr = print "(" $durationStr ")" }}
        {{ $durationStr }}
    </p>
    {{ with .Params.location}}
    <p class="location">
        {{ . }}
    </p>
    {{ end }}

    </div>
</div>