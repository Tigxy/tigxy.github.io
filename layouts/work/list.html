{{ define "main" }}
<article class="post">
  <header>
    <h1>{{ .Title }}</h1>
  </header>
  
  {{ $totalTimeStr := partial "total-duration.html" . }}

  {{ $partTimePages := where .Pages "Params.type" "==" "part" }}
  {{ $partTimeStr := partial "total-duration.html" (dict "Pages" $partTimePages) }}
  
  {{ $fullTimePages := where .Pages "Params.type" "==" "full" }}
  {{ $fullTimeStr := partial "total-duration.html" (dict "Pages" $fullTimePages) }}
 
  <p>
  Below is a timeline of all my professional history. Until now, I have worked in total
  {{ partial "inline-details.html" (dict
    "summary" $totalTimeStr
    "details" (printf "full-time: %s | part-time: %s" $fullTimeStr $partTimeStr)
) }}.
</p>

  <section class="timeline work-section">
    {{ $lastLogo := "" }}
    {{ range (.Pages.ByParam "end").Reverse }}
      {{ partial "timeline-entry.html" (dict "Params" .Params "lastLogo" $lastLogo "File" .File ) }}
      {{ $lastLogo = .Params.logo }}
    {{ end }}
  </section>
</article>
{{ end }}
